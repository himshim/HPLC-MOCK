<!DOCTYPE html>
<html>
<head>
    <title>Real-time HPLC Chromatogram Plotting</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <div>
        <label for="retention-time">Retention Time (min): </label>
        <input type="number" id="retention-time" min="0" step="0.1" value="0">
    </div>
    <div>
        <label for="peak-height">Peak Height: </label>
        <input type="number" id="peak-height" min="0" step="0.1" value="0">
    </div>
    <div>
        <label for="tailing-factor">Tailing Factor: </label>
        <input type="number" id="tailing-factor" min="0" step="0.1" value="0">
    </div>
    <div id="plot"></div>

    <script>
        // Get user inputs
        var retentionTimeInput = document.getElementById('retention-time');
        var peakHeightInput = document.getElementById('peak-height');
        var tailingFactorInput = document.getElementById('tailing-factor');

        // Define initial data
        var data = [{
            x: [0, retentionTimeInput.value, retentionTimeInput.value, retentionTimeInput.value+(0.1*tailingFactorInput.value)],
            y: [0, 0, peakHeightInput.value, 0],
            type: 'scatter'
        }];

        // Define layout
        var layout = {
            xaxis: {
                title: 'Retention Time (min)',
                range: [0, retentionTimeInput.value + (0.1 * tailingFactorInput.value)]
            },
            yaxis: {
                title: 'Detector Response (AU)',
                range: [0, peakHeightInput.value * 1.1]
            },
            title: 'HPLC Chromatogram'
        };

        // Plot initial graph
        Plotly.newPlot('plot', data, layout);

        // Update graph on user input
        retentionTimeInput.addEventListener('input', function() {
            data[0].x[1] = retentionTimeInput.value;
            data[0].x[2] = retentionTimeInput.value;
            data[0].x[3] = retentionTimeInput.value + (0.1 * tailingFactorInput.value);
            Plotly.redraw('plot');
        });

        peakHeightInput.addEventListener('input', function() {
            data[0].y[2] = peakHeightInput.value;
            layout.yaxis.range[1] = peakHeightInput.value * 1.1;
            Plotly.redraw('plot');
        });

        tailingFactorInput.addEventListener('input', function() {
            data[0].x[3] = retentionTimeInput.value + (0.1 * tailingFactorInput.value);
            layout.xaxis.range[1] = retentionTimeInput.value + (0.1 * tailingFactorInput.value);
            Plotly.redraw('plot');
        });
    </script>
</body>
</html>
